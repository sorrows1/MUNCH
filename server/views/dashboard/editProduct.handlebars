<section>
  <h4 class='mb-3'>
    Update Product
  </h4>
  <form class='row g-3 needs-validation' novalidate method="post">
    <div class='col-md-8 col-sm-12'>
      <div class='card flex-column g-3 p-3'>
        <label for='validationCustom01' class='form-label'>Product Name</label>
        <input
          type='text'
          class='form-control'
          id='validationCustom01'
          placeholder='Product Name'
          name="title"
          value="{{dataValues.title}}"
          required
        />
        <div class='invalid-feedback'>
          Product Name is required.
        </div>
        <label
          for='validationCustom02'
          class='form-label mt-3'
        >Description</label>
        <textarea
          class='form-control'
          id='validationCustom02'
          rows='8'
          placeholder='Write something awesome'
          name="description"
          required
        >{{dataValues.description}}</textarea>
        <div class='invalid-feedback'>
          Description is required.
        </div>
        <label for='validationCustom03' class='form-label mt-3'>Image</label>
        <input
          type='file'
          class='form-control'
          id='validationCustom03'
          name="image"
          required
        />
      </div>
      <div class='card flex-column g-3 p-3 mt-3'>

      </div>
    </div>
    <div class='col-md-4 col-sm-12'>
      <div class='card flex-column g-3 p-3'>
        <label class='form-label'>Product Status</label>
        <div class='form-check form-switch'>
          <input
            class='form-check-input'
            type='checkbox'
            id='flexSwitchCheckDefault'
            name="active"
            {{#if dataValues.active}}
            checked
            {{/if}}
          />
          <label
            class='form-check-label'
            for='flexSwitchCheckDefault'
          >Active</label>
        </div>
        <label for='validationCustom04' class='form-label mt-3'>Product Price</label>
        <div class='input-group mb-3'>
          <span class='input-group-text'>$</span>
          <input
            type='number'
            class='form-control'
            aria-label='Product Price'
            id='validationCustom04'
            placeholder='0.00'
            name="price"
            value="{{dataValues.price}}"
            required
          />
        </div>
        <div class='invalid-feedback'>
          Product Price is required.
        </div>
        <label for='validationCustom05' class='form-label mt-1' >Health Score</label>
          <input
            type='number'
            class='form-control'
            id='validationCustom05'
            placeholder='100'
            name="healthScore"
            min="1" max="100"
            {{dataValues.healthScore}}
            required
          />
        <div class='invalid-feedback'>
          Health Score is required.
        </div>
        <label for='validationCustom06' class='form-label mt-1'>Diets</label>
        <select class="select2-multiple form-select form-control" name="diets" multiple="multiple" aria-placeholder="diets" required>
          {{#each dataValues.types}}
          <option value="{{dataValues.id}}" selected>{{dataValues.name}}</option>
          {{/each}}
          {{#each diets}}
            <option value="{{id}}">{{name}}</option>
          {{/each}}
        </select>
        <div class='invalid-feedback'>
          Diet is required.
        </div>
        </div>
        <button type="submit" class="btn btn-success w-100 mt-3">Update Product</button>
      </div>
    </div>
  </form>
</section>
<script>
  $(document).ready(function() { 
  $('.select2-multiple').select2({
    minimumResultsForSearch: Infinity
  }); 
  var form = document.querySelector('.needs-validation')
  form.addEventListener('submit', function (event) {
    event.preventDefault()
     event.stopPropagation()
    const formData = new FormData(event.target)
    console.log(JSON.stringify(Object.fromEntries(formData)))
    if (!form.checkValidity()) {
      event.preventDefault()
      event.stopPropagation()
    }

    form.classList.add('was-validated')
    
  }, false)
  });
</script>